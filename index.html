<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>aniiidroid · retro desktop</title>
  <style>
    /* ======= MANUAL KNOBS (edit these) =======
       Files next to index.html: 98webbgfin2.png, media head.png, aoll.png, mouse 3.gif, laser.mp3

       ▶ Head screen (YouTube) position & size — values are % of the GREEN HEAD box
         - left/top move the video window inside the head
         - w/h change its size inside the head
         Example: increase --screen-w to make the video wider, move --screen-left to shift right
    */
    :root{
      /* Head box placement on the page (percent of full page) */
      --player-x: 21;   /* left %  of page */
      --player-y: 14;   /* top  %  of page */
      --player-w: 58;   /* width % of page */

       /* Video window inside the head (percent of the head box) */
      --screen-left: 37.0; /* % from head's left edge */
      --screen-top:  28.0; /* % from head's top  edge */
      --screen-w:    27.0; /* width  % of head */
      --screen-h:    30.0; /* height % of head */
      
      /* AOL window default placement */
      --aol-x: 73;  --aol-y: 54;  --aol-w: 22;

      /* Always show the full background image (no cropping). Use 'cover' if you prefer full-bleed. */
      --bgfit: contain;
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{background:#061607;color:#000;font-family:Tahoma,Verdana,system-ui,sans-serif;cursor:none}

    /* Full-screen stage with responsive background */
    .stage{position:fixed; inset:0; width:100vw; height:100dvh;
           background:url('98webbgfin3.png') center/var(--bgfit) no-repeat; overflow:hidden}

    /* Draggable head */
    .player{position:absolute; left:calc(var(--player-x) * 1%); top:calc(var(--player-y) * 1%);
            width:calc(var(--player-w) * 1%); user-select:none; -webkit-user-drag:none; cursor:grab; touch-action:none}
    .player:active{cursor:grabbing}
    .player .sprite{position:relative; z-index:2; width:100%; height:auto; display:block; image-rendering:pixelated}

    /* Video sits UNDER the PNG so it shows through the transparent screen */
    .player .screen{position:absolute; z-index:1; left:calc(var(--screen-left) * 1%); top:calc(var(--screen-top) * 1%);
                    width:calc(var(--screen-w) * 1%); height:calc(var(--screen-h) * 1%);
                    background:#000; overflow:hidden}
    .player .screen iframe{position:absolute; inset:0; width:100%; height:100%; border:0}

    /* Draggable AOL window */
    .aol{position:absolute; left:calc(var(--aol-x) * 1%); top:calc(var(--aol-y) * 1%);
         width:calc(var(--aol-w) * 1%); user-select:none; -webkit-user-drag:none; cursor:grab; z-index:3; touch-action:none}
    .aol:active{cursor:grabbing}
    .aol .sprite{width:100%; height:auto; display:block; image-rendering:pixelated}

    /* Custom cursor */
    #cursor{position:fixed; left:0; top:0; height:32px; width:auto; pointer-events:none;
            transform:translate(-50%,-50%); image-rendering:pixelated; z-index:9999}
    #cursor.down{filter:invert(1) hue-rotate(180deg)}
    .stage, .player, .aol{ touch-action:none; }
    #cursor.down{filter:invert(1) hue-rotate(180deg)}
  </style>
</head>
<body>
  <main class="stage" id="stage" aria-label="retro desktop background">
    <!-- Head -->
    <div class="player" id="player">
      <img src="media head.png" alt="media head" class="sprite" draggable="false"/>
      <div class="screen" aria-label="video screen">
        <iframe id="yt" src="https://www.youtube.com/embed/zYciVG2uOw4?rel=0&modestbranding=1&playsinline=1&autoplay=1&mute=1&enablejsapi=1"
          title="YouTube player" allow="autoplay; accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
      </div>
    </div>

    <!-- AOL window -->
    <div class="aol" id="aol">
      <img src="aoll.png" alt="About window" class="sprite" draggable="false"/>
    </div>
  </main>

  <!-- Cursor & click sound -->
  <img id="cursor" src="mouse 3.gif" alt="" onerror="document.body.style.cursor='auto'; this.remove();"/>
  <audio id="clickAudio" src="laser.mp3" preload="auto"></audio>

  <script>
    // Elements
    const stage = document.getElementById('stage');
    const player = document.getElementById('player');
    const aol    = document.getElementById('aol');
    const cursor = document.getElementById('cursor');

    const stageRect = () => stage.getBoundingClientRect();
    const setVar = (el, name, value) => el.style.setProperty(name, String(value));

    // ---- DRAG HELPERS ----
    function clamp(v,min,max){ return Math.max(min, Math.min(max, v)); }
    function pctX(px){ const S = stageRect(); return (px - S.left) / S.width * 100; }
    function pctY(py){ const S = stageRect(); return (py - S.top)  / S.height * 100; }

    // ---- DRAG: head (no autopilot) ----
    let dragging = false, dx = 0, dy = 0;
    function startHead(e){
      if(e.target && e.target.closest && e.target.closest('.screen')) return; // let video be clickable
      dragging = true; try{ player.setPointerCapture?.(e.pointerId); }catch(_){ }
      const r = player.getBoundingClientRect(); dx = (e.clientX||e.touches?.[0]?.clientX) - r.left; dy = (e.clientY||e.touches?.[0]?.clientY) - r.top; clickFx();
    }
    function moveHead(e){ if(!dragging) return; const p = e.touches?.[0]||e; const S = stageRect();
      let x = pctX(p.clientX - dx + S.left), y = pctY(p.clientY - dy + S.top);
      const pw = player.getBoundingClientRect().width / S.width * 100;
      x = clamp(x, 0, 100 - pw); y = clamp(y, 0, 100 - 10);
      setVar(player, '--player-x', x.toFixed(2)); setVar(player, '--player-y', y.toFixed(2));
    }
    function stopHead(){ dragging = false; }

    player.addEventListener('pointerdown', startHead);
    player.addEventListener('mousedown', startHead);
    player.addEventListener('touchstart', startHead, {passive:true});

    window.addEventListener('pointermove', moveHead);
    window.addEventListener('mousemove', moveHead);
    window.addEventListener('touchmove', moveHead, {passive:true});

    window.addEventListener('pointerup', stopHead);
    window.addEventListener('mouseup', stopHead);
    window.addEventListener('touchend', stopHead);

    // ---- DRAG: AOL window ----
    let draggingA = false, adx = 0, ady = 0;
    function startAol(e){ draggingA = true; try{ aol.setPointerCapture?.(e.pointerId); }catch(_){ }
      const r = aol.getBoundingClientRect(); adx = (e.clientX||e.touches?.[0]?.clientX) - r.left; ady = (e.clientY||e.touches?.[0]?.clientY) - r.top; clickFx(); }
    function moveAol(e){ if(!draggingA) return; const p = e.touches?.[0]||e; const S = stageRect();
      let x = pctX(p.clientX - adx + S.left), y = pctY(p.clientY - ady + S.top);
      const aw = aol.getBoundingClientRect().width / S.width * 100;
      x = clamp(x, 0, 100 - aw); y = clamp(y, 0, 100 - 10);
      setVar(aol, '--aol-x', x.toFixed(2)); setVar(aol, '--aol-y', y.toFixed(2)); }
    function stopAol(){ draggingA = false; }

    aol.addEventListener('pointerdown', startAol);
    aol.addEventListener('mousedown', startAol);
    aol.addEventListener('touchstart', startAol, {passive:true});

    window.addEventListener('pointermove', moveAol);
    window.addEventListener('mousemove', moveAol);
    window.addEventListener('touchmove', moveAol, {passive:true});

    window.addEventListener('pointerup', stopAol);
    window.addEventListener('mouseup', stopAol);
    window.addEventListener('touchend', stopAol);

    // ---- Cursor follower (robust) ----
    let _moved = false;
    function cursorMove(e){ if(!cursor) return; const p = e.touches?.[0]||e; cursor.style.left = p.clientX + 'px'; cursor.style.top = p.clientY + 'px'; _moved = true; }
    window.addEventListener('pointermove', cursorMove);
    window.addEventListener('mousemove', cursorMove);
    window.addEventListener('touchmove', cursorMove, {passive:true});
    window.addEventListener('pointerdown', ()=>{ cursor?.classList.add('down'); clickFx(); });
    window.addEventListener('pointerup',   ()=> cursor?.classList.remove('down'));
    // If the custom cursor never moved (e.g., some browser blocks events), fall back to system cursor.
    setTimeout(()=>{ if(!_moved){ document.body.style.cursor='auto'; cursor?.remove(); } }, 1200);

   <script>
  // ---- Click sound helper (used by drag handlers) ----
  const clickEl = document.getElementById('clickAudio');
  function clickFx(){
    if (!clickEl) return;
    try { clickEl.currentTime = 0; clickEl.play(); } catch(_) {}
  }

  // ---- YouTube autoplay (muted) – fire ASAP + retry ----
  function ytCmd(func, args){
    const yt = document.getElementById('yt');
    try {
      yt?.contentWindow?.postMessage(
        JSON.stringify({event:'command', func, args: args||[]}),
        '*'
      );
    } catch (_) {}
  }
  function ensureAutoplay(){
    ytCmd('mute');
    ytCmd('playVideo');
  }

  // Try on doc ready / load, then a few delayed retries
  ['DOMContentLoaded','load'].forEach(ev =>
    window.addEventListener(ev, () => setTimeout(ensureAutoplay, 50))
  );
  [300, 1000, 2000, 4000].forEach(t => setTimeout(ensureAutoplay, t));

  // If the tab becomes visible again, try once more
  document.addEventListener('visibilitychange', () => {
    if (!document.hidden) ensureAutoplay();
  });

  // Optional fallback: if a user does click/tap, also trigger play (keeps it muted)
  window.addEventListener('pointerdown', ensureAutoplay, { once:false });
  window.addEventListener('touchstart', ensureAutoplay, { once:false, passive:true });
  window.addEventListener('keydown', ensureAutoplay, { once:false });
</script>

    };
    window.addEventListener('pointerdown', prime, {once:true});
    window.addEventListener('keydown', prime,  {once:true});
    window.addEventListener('touchstart', prime, {once:true, passive:true});
  </script>
</body>
</html>
