<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>aniiidroid · retro desktop</title>
  <style>
    /* ======= MANUAL KNOBS (edit these) =======
       Files next to index.html: 98webbgfin2.png, media head.png, aoll.png, mouse 3.gif, laser.mp3

       ▶ Head screen (YouTube) position & size — values are % of the GREEN HEAD box
         - left/top move the video window inside the head
         - w/h change its size inside the head
         Example: increase --screen-w to make the video wider, move --screen-left to shift right
    */
    :root{
      /* Head box placement on the page (percent of full page) */
      --player-x: 21;   /* left %  of page */
      --player-y: 14;   /* top  %  of page */
      --player-w: 58;   /* width % of page */

      /* Video window inside the head (percent of the head box) */
      --screen-left: 38.0; /* % from head's left edge */
      --screen-top:  26.0; /* % from head's top  edge */
      --screen-w:    25.8; /* width  % of head */
      --screen-h:    29.0; /* height % of head */

      /* AOL window default placement */
      --aol-x: 73;  --aol-y: 54;  --aol-w: 22;

      /* Always show the full background image (no cropping). Use 'cover' if you prefer full-bleed. */
      --bgfit: contain;
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{background:#061607;color:#000;font-family:Tahoma,Verdana,system-ui,sans-serif;cursor:none}

    /* Full-screen stage with responsive background */
    .stage{position:fixed; inset:0; width:100vw; height:100dvh;
           background:url('98webbgfin2.png') center/var(--bgfit) no-repeat; overflow:hidden}

    /* Draggable head */
    .player{position:absolute; left:calc(var(--player-x) * 1%); top:calc(var(--player-y) * 1%);
            width:calc(var(--player-w) * 1%); user-select:none; -webkit-user-drag:none; cursor:grab; touch-action:none}
    .player:active{cursor:grabbing}
    .player .sprite{position:relative; z-index:2; width:100%; height:auto; display:block; image-rendering:pixelated}

    /* Video sits UNDER the PNG so it shows through the transparent screen */
    .player .screen{position:absolute; z-index:1; left:calc(var(--screen-left) * 1%); top:calc(var(--screen-top) * 1%);
                    width:calc(var(--screen-w) * 1%); height:calc(var(--screen-h) * 1%);
                    background:#000; overflow:hidden}
    .player .screen iframe{position:absolute; inset:0; width:100%; height:100%; border:0}

    /* Draggable AOL window */
    .aol{position:absolute; left:calc(var(--aol-x) * 1%); top:calc(var(--aol-y) * 1%);
         width:calc(var(--aol-w) * 1%); user-select:none; -webkit-user-drag:none; cursor:grab; z-index:3; touch-action:none}
    .aol:active{cursor:grabbing}
    .aol .sprite{width:100%; height:auto; display:block; image-rendering:pixelated}

    /* Custom cursor */
    #cursor{position:fixed; left:0; top:0; height:32px; width:auto; pointer-events:none;
            transform:translate(-50%,-50%); image-rendering:pixelated; z-index:9999}
    #cursor.down{filter:invert(1) hue-rotate(180deg)}
  </style>
</head>
<body>
  <main class="stage" id="stage" aria-label="retro desktop background">
    <!-- Head -->
    <div class="player" id="player">
      <img src="media head.png" alt="media head" class="sprite" draggable="false"/>
      <div class="screen" aria-label="video screen">
        <iframe id="yt" src="https://www.youtube.com/embed/zYciVG2uOw4?rel=0&modestbranding=1&playsinline=1&autoplay=1&mute=1&enablejsapi=1"
          title="YouTube player" allow="autoplay; accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
      </div>
    </div>

    <!-- AOL window -->
    <div class="aol" id="aol">
      <img src="aoll.png" alt="About window" class="sprite" draggable="false"/>
    </div>
  </main>

  <!-- Cursor & click sound -->
  <img id="cursor" src="mouse 3.gif" alt="" onerror="document.body.style.cursor='auto'; this.remove();"/>
  <audio id="clickAudio" src="laser.mp3" preload="auto"></audio>

  <script>
    // Elements
    const stage = document.getElementById('stage');
    const player = document.getElementById('player');
    const aol    = document.getElementById('aol');
    const cursor = document.getElementById('cursor');

    const stageRect = () => stage.getBoundingClientRect();
    const setVar = (el, name, value) => el.style.setProperty(name, String(value));

    // ---- DRAG: head (no autopilot) ----
    let dragging = false, dx = 0, dy = 0;
    player.addEventListener('pointerdown', (e)=>{
      if(e.target && e.target.closest && e.target.closest('.screen')) return; // allow video controls
      dragging = true; try{ player.setPointerCapture(e.pointerId); }catch(_){}
      const r = player.getBoundingClientRect(); dx = e.clientX - r.left; dy = e.clientY - r.top; clickFx();
    });
    window.addEventListener('pointermove', (e)=>{
      cursorMove(e);
      if(!dragging) return; const S = stageRect();
      let x = ((e.clientX - S.left - dx)/S.width)*100;
      let y = ((e.clientY - S.top  - dy)/S.height)*100;
      const pw = player.getBoundingClientRect().width / S.width * 100;
      x = Math.max(0, Math.min(100 - pw, x)); y = Math.max(0, Math.min(100 - 10, y));
      setVar(player, '--player-x', x.toFixed(2)); setVar(player, '--player-y', y.toFixed(2));
    });
    window.addEventListener('pointerup', ()=> dragging = false);

    // ---- DRAG: AOL window ----
    let draggingA = false, adx = 0, ady = 0;
    (aol)?.addEventListener('pointerdown', (e)=>{
      draggingA = true; try{ aol.setPointerCapture(e.pointerId);}catch(_){}
      const r = aol.getBoundingClientRect(); adx = e.clientX - r.left; ady = e.clientY - r.top; clickFx();
    });
    window.addEventListener('pointermove', (e)=>{
      if(!draggingA) return; const S = stageRect();
      let x = ((e.clientX - S.left - adx)/S.width)*100;
      let y = ((e.clientY - S.top  - ady)/S.height)*100;
      const aw = aol.getBoundingClientRect().width / S.width * 100;
      x = Math.max(0, Math.min(100 - aw, x)); y = Math.max(0, Math.min(100 - 10, y));
      setVar(aol, '--aol-x', x.toFixed(2)); setVar(aol, '--aol-y', y.toFixed(2));
    });
    window.addEventListener('pointerup', ()=> draggingA = false);

    // ---- Cursor follower ----
    function cursorMove(e){ if(!cursor) return; cursor.style.left = e.clientX + 'px'; cursor.style.top = e.clientY + 'px'; }
    window.addEventListener('pointermove', cursorMove);
    window.addEventListener('pointerdown', ()=>{ cursor?.classList.add('down'); clickFx(); });
    window.addEventListener('pointerup',   ()=> cursor?.classList.remove('down'));
    window.addEventListener('keydown', (e)=>{ if(e.key==='c') document.body.style.cursor = (document.body.style.cursor==='none'?'auto':'none'); });

    // ---- Click sound & YouTube autoplay (muted) ----
    const clickEl = document.getElementById('clickAudio');
    const prime = () => {
      clickEl?.play()?.then(()=>{ clickEl.pause(); clickEl.currentTime = 0; }).catch(()=>{});
      const yt = document.getElementById('yt');
      const cmd = (func,args)=>{ try{ yt?.contentWindow?.postMessage(JSON.stringify({event:'command', func, args: args||[]}), '*'); }catch(_){} };
      cmd('mute'); cmd('playVideo');
      window.removeEventListener('pointerdown', prime);
      window.removeEventListener('keydown', prime);
    };
    window.addEventListener('pointerdown', prime, {once:true});
    window.addEventListener('keydown', prime,  {once:true});
  </script>
</body>
</html>
